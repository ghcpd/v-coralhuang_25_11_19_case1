<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Product Browser</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      },
    }
  </script>
</head>
<body class="min-h-screen bg-slate-50 text-slate-900">
  <div class="max-w-6xl mx-auto px-4 py-8">
    <header class="mb-8 space-y-4">
      <h1 class="text-3xl md:text-4xl font-bold tracking-tight">Browse Products</h1>
      <p class="text-slate-600">Search, filter by category, and sort by price. Results update with a brief loading state.</p>

      <form id="filters-form" class="grid grid-cols-1 md:grid-cols-3 gap-3" aria-label="Product filters">
        <label class="relative block">
          <span class="sr-only">Search products</span>
          <input id="search-input" name="search" type="search" placeholder="Search products" aria-label="Search products"
            class="w-full rounded-lg border border-slate-200 bg-white px-4 py-3 pr-10 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" />
          <svg class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>
        </label>

        <label class="block">
          <span class="sr-only">Filter by category</span>
          <select id="category-select" name="category" aria-label="Filter by category" 
            class="w-full rounded-lg border border-slate-200 bg-white px-4 py-3 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition">
            <option value="">All categories</option>
          </select>
        </label>

        <label class="block">
          <span class="sr-only">Sort by price</span>
          <select id="sort-select" name="sort" aria-label="Sort by price" 
            class="w-full rounded-lg border border-slate-200 bg-white px-4 py-3 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition">
            <option value="asc">Price: Low to High</option>
            <option value="desc">Price: High to Low</option>
          </select>
        </label>
      </form>
    </header>

    <section aria-live="polite" aria-busy="false" aria-label="Product results" class="relative">
      <div id="loading-overlay" class="pointer-events-none invisible opacity-0 transition-opacity duration-200 absolute inset-0 flex items-center justify-center bg-white/70 backdrop-blur-sm z-10">
        <div class="flex items-center gap-3 text-slate-500">
          <svg class="animate-spin h-5 w-5 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path></svg>
          <span>Loading resultsâ€¦</span>
        </div>
      </div>

      <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>

      <div id="empty-state" class="hidden mt-8 rounded-xl border border-dashed border-slate-200 bg-white p-8 text-center text-slate-500">
        <h2 class="text-xl font-semibold mb-2">No products found</h2>
        <p class="mb-4">Try adjusting your search or filters.</p>
        <button id="reset-filters" class="inline-flex items-center justify-center px-4 py-2 rounded-lg bg-blue-500 text-white font-medium hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-200 transition">Reset filters</button>
      </div>
    </section>
  </div>

  <script>
    const products = [
      { id: 1, name: 'Laptop Pro 15"', price: 1299, description: 'Powerful performance for creators.', category: 'Computers' },
      { id: 2, name: 'Laptop Air 13"', price: 999, description: 'Lightweight productivity on the go.', category: 'Computers' },
      { id: 3, name: 'Smartphone X', price: 799, description: 'Stunning display and great camera.', category: 'Phones' },
      { id: 4, name: 'Smartphone Mini', price: 599, description: 'Compact design with big features.', category: 'Phones' },
      { id: 5, name: 'Mirrorless Camera', price: 1099, description: 'Capture sharp images and video.', category: 'Cameras' },
      { id: 6, name: 'Action Cam 4K', price: 349, description: 'Rugged, waterproof adventure cam.', category: 'Cameras' },
      { id: 7, name: 'Noise-Cancelling Headphones', price: 249, description: 'Immersive sound, long battery.', category: 'Audio' },
      { id: 8, name: 'Wireless Earbuds', price: 149, description: 'Pocketable buds with great sound.', category: 'Audio' },
      { id: 9, name: 'Smartwatch Fit', price: 199, description: 'Track health and notifications.', category: 'Wearables' },
      { id: 10, name: 'Fitness Tracker', price: 99, description: 'Essential activity tracking.', category: 'Wearables' },
    ];

    const searchInput = document.getElementById('search-input');
    const categorySelect = document.getElementById('category-select');
    const sortSelect = document.getElementById('sort-select');
    const productList = document.getElementById('product-list');
    const loadingOverlay = document.getElementById('loading-overlay');
    const emptyState = document.getElementById('empty-state');
    const resetFiltersBtn = document.getElementById('reset-filters');

    const renderCategories = () => {
      const categories = Array.from(new Set(products.map(p => p.category))).sort();
      categories.forEach(cat => {
        const option = document.createElement('option');
        option.value = cat;
        option.textContent = cat;
        categorySelect.appendChild(option);
      });
    };

    const formatCurrency = (value) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(value);

    const setLoading = (isLoading) => {
      loadingOverlay.classList.toggle('invisible', !isLoading);
      loadingOverlay.classList.toggle('opacity-0', !isLoading);
      loadingOverlay.parentElement.setAttribute('aria-busy', isLoading ? 'true' : 'false');
    };

    const renderProducts = (items) => {
      productList.innerHTML = '';
      if (!items.length) {
        productList.classList.add('hidden');
        emptyState.classList.remove('hidden');
        return;
      }
      productList.classList.remove('hidden');
      emptyState.classList.add('hidden');

      const fragment = document.createDocumentFragment();
      items.forEach(p => {
        const card = document.createElement('article');
        card.className = 'group h-full rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg focus-within:ring-2 focus-within:ring-blue-200';
        card.setAttribute('tabindex', '0');

        const title = document.createElement('h2');
        title.className = 'text-lg font-semibold text-slate-900 mb-1 group-hover:text-blue-600';
        title.textContent = p.name;

        const category = document.createElement('div');
        category.className = 'inline-flex items-center rounded-full bg-blue-50 text-blue-600 text-xs font-medium px-2 py-1 mb-3';
        category.textContent = p.category;

        const price = document.createElement('div');
        price.className = 'text-xl font-bold text-slate-900 mb-2';
        price.textContent = formatCurrency(p.price);

        const desc = document.createElement('p');
        desc.className = 'text-sm text-slate-600';
        desc.textContent = p.description;

        card.append(category, title, price, desc);
        fragment.appendChild(card);
      });

      productList.appendChild(fragment);
    };

    const applyFilters = () => {
      const keyword = searchInput.value.trim().toLowerCase();
      const category = categorySelect.value;
      const sort = sortSelect.value;

      let filtered = products.filter(p => {
        const matchesKeyword = !keyword || [p.name, p.description, p.category].some(text => text.toLowerCase().includes(keyword));
        const matchesCategory = !category || p.category === category;
        return matchesKeyword && matchesCategory;
      });

      filtered = filtered.sort((a, b) => sort === 'asc' ? a.price - b.price : b.price - a.price);
      renderProducts(filtered);
    };

    const debounce = (fn, delay = 250) => {
      let t;
      return (...args) => {
        clearTimeout(t);
        t = setTimeout(() => fn.apply(null, args), delay);
      };
    };

    const withLoading = (fn) => {
      setLoading(true);
      setTimeout(() => {
        fn();
        setLoading(false);
      }, 350); // simulate loading delay
    };

    const handleFilterChange = debounce(() => withLoading(applyFilters), 100);

    const init = () => {
      renderCategories();
      renderProducts(products);

      searchInput.addEventListener('input', handleFilterChange);
      categorySelect.addEventListener('change', () => withLoading(applyFilters));
      sortSelect.addEventListener('change', () => withLoading(applyFilters));
      resetFiltersBtn.addEventListener('click', (e) => {
        e.preventDefault();
        searchInput.value = '';
        categorySelect.value = '';
        sortSelect.value = 'asc';
        withLoading(applyFilters);
      });
    };

    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
